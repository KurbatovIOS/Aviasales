# Aviasales
<img width="150" src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExbnl0ZTNsMGtieWM2a3U2OXUxdWx6Zm5zcTB3eDc4ZHhkMHk0aHczaiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/54Y4gr8FntNzXGbWxT/giphy.gif"/>

## Описание

Минимальная версия: iOS 14

Архитектура: MVVM

Пользовательский интерфейс: SwiftUI

Поддержка тёмной темы

Unit и UI тесты

##

Приложение состоит из трёх экранов:

<b> 1) Экран ошибки, если не удалость получить информацию о рейсах </b>

<b> 2) Экран со списком доступных рейсов </b>

<b> 3) Экран покупки билета на выбранный рейс </b>

Для контроля за состоянием приложения во view model имеется соотвествующая переменная, помеченная как @Published для того, чтобы следить за её изменениями. Приложение находится в одном из четырёх состояний, реализованных через enum: unset (только при запуске приложения), loading, error, loaded. При отправлении запроса устанавливается состояние loading, а на экране отображается ProgressView. Состояние loaded принимает информацию, полученную в результате успешного запроса.

В случае ошибки загрузки информации о рейстах устанавливается состояние error и появляется первый экрна, содержащий сообщение о том, что что-то пошло не так, а также кнопку, позволяющую пользователю повторить загрузку данных. Для выполнения запроса был создан сервис <b>APIService</b>, который передаётся во view model при её инициализации.

При успешном выполнении запроса устанавливается состояние loaded и отображается второй экрна. Рейсы сортируются по цене билетов и первый рейст помечается как самый дешёвый вариант, после чего информация передается через состояние. Для отображение информации на экране была создана ячейка, которая переиспользуется для всех рейсов. Для корректного отображения даты и времени был создан сервис <b>FormatterService</b>, который отвечает за преобразования даты, полученной изначально, в нужный вид. Сервис передаётся во view model при её инициализации. При отображении сообщения о количестве оставшихся билетов были учтены особенности русского языка: правильное окончание выбирается на основе конкретного числа.











